<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Raohmaru Toolkit</title>
		<meta name="description" content="Librería ActionScript 3 para ayudar en el desarrollo de aplicaciones Flash y Flex.">
		
		
		<link rel="stylesheet" href="/raohmaru-blog/dist/u0fmsLUsWO.css">
	</head>
	<body>
		<a href="#skip" class="visually-hidden">Skip to main content</a>

		<header>
            <div class="section">
                <a href="/raohmaru-blog/" class="home-link">Reinventing the wheel</a>
                <nav>
                    <h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
                    <ul class="nav">
                        <li class="nav-item"><a href="/raohmaru-blog/about/">About</a></li>
                        <li class="nav-item"><a href="/raohmaru-blog/tags/">Tags</a></li>
                        <li class="nav-item"><a href="https://github.com/raohmaru">Github</a></li>
                    </ul>
                </nav>
            </div>
		</header>

		<main id="skip">
            <div class="section">
                
<h1 id="raohmaru-toolkit">Raohmaru Toolkit</h1>

<ul class="post-metadata">
	<li><time datetime="2012-05-31">31 May 2012</time></li>
        <li><a href="/raohmaru-blog/tags/as3/" class="post-tag">as3</a>, </li>
        <li><a href="/raohmaru-blog/tags/library/" class="post-tag">library</a></li>
</ul>

<p>Aprovecho que el blog es mío para presentar Raohmaru Toolkit, una librería programada en <a href="http://www.adobe.com/devnet/actionscript.html">ActionScript 3</a> para ayudar en el desarrollo de aplicaciones Flash o Flex, en la medida de lo posible claro.</p>
<p>¿Flash? ¿Pero <a href="http://isflashdeadyet.com/">no estaba muerto</a>?</p>
<p>Muerto, lo que se dice muerto, no. Ni siquiera malherido. Aunque parece que la tendencia es de ir abandonando lentamente la tecnología Flash en el desarrollo de sitios, para hacer la web más accesible (hablamos sobretodo de dispositivos móviles, <em>tablets</em>, lavadoras, y otros cacharros donde <a href="http://www.zdnet.com/blog/perlow/exclusive-adobe-ceases-development-on-mobile-browser-flash-refocuses-efforts-on-html5-updated/19226">no habrá más soporte para Flash Player en sus navegadores</a>), esto no ha sido óbice para que siga presente en <a href="http://www.adobe.com/es/products/air.html">aplicaciones</a>, <a href="http://www.adobe.com/devnet/flashplayer/stage3d.html">juegos</a>, allá donde todavía <a href="http://www.periscopic.com/#/news/2012/03/our-research-into-flash-and-html5-ten-months-later-a-second-look/">no llega HTML5</a> o para <a href="https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills">mantener la compatibilidad</a> con los viejos navegadores.</p>
<p>En resumen y para no desviarme del tema central, que todavía queda Flash para rato.</p>
<p><strong>Raohmaru Toolkit</strong> es un compendio de utilidades (<a href="http://www.kirupa.com/developer/as3/classes_as3_pg1.htm">clases</a>) programadas y recopiladas durante varios años de desarrollo con la tecnología Adobe Flash, muchas de ellas surgidas de las necesidades de ciertos proyectos, o para cubrir algunas carencias del lenguaje. Es heredera directa de <a href="http://code.google.com/p/raohmaru-as3-framework/">Raohmaru AS3 Framework</a>, mi opera prima en librerías AS3 con un nombre pomposo y erróneo (de <a href="http://stackoverflow.com/questions/3057526/framework-vs-toolkit-vs-library"><em>framework</em></a> nada, no pasaba de <em>toolkit</em>), pero con las clases poco útiles (o inútiles) eliminadas y permaneciendo lo más práctico y esencial. Aunque realmente no aporta nada nuevo al panorama en ActionScript 3, un lenguaje que ha tenido un gran soporte por parte de la comunidad y que cuenta con <a href="http://www.riaforge.org/index.cfm?event=page.category&amp;id=6">excelente librerías</a>, esta compilación es un pequeño grano de arena donde alguien quizá encuentre un trozo de código que le pueda ser de utilidad, o que al examinarlo diga “Vaya, yo lo hubiera programado mejor”.</p>
<p>El código fuente está hospedado en GitHub: <a href="https://github.com/raohmaru/Raohmaru-Toolkit">https://github.com/raohmaru/Raohmaru-Toolkit</a><br>
La descargas en Google Code: <a href="http://code.google.com/p/raohmaru-toolkit/">http://code.google.com/p/raohmaru-toolkit/</a><br>
La documentación se encuentra en Read the Docs: <a href="http://readthedocs.org/docs/raohmaru-toolkit/en/latest/">http://readthedocs.org/docs/raohmaru-toolkit/en/latest/</a></p>
<p>Y hablando de licencias, distribuido bajo la <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a>.</p>
<h2 id="aspectos-destacados-de-la-libreria">Aspectos destacados de la librería</h2>
<p><strong>Registro de eventos simplificado</strong></p>
<pre class="language-js" tabindex="0"><code class="language-js"><span class="token keyword">import</span> jp<span class="token punctuation">.</span>raohmaru<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span>events<span class="token punctuation">.</span>EventRegister<span class="token punctuation">;</span>  
<span class="token keyword">import</span> jp<span class="token punctuation">.</span>raohmaru<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span>events<span class="token punctuation">.</span>EventGroup<span class="token punctuation">;</span>  
<span class="token keyword">import</span> flash<span class="token punctuation">.</span>events<span class="token punctuation">.</span>MouseEvent<span class="token punctuation">;</span>

<span class="token comment">// Esto…  </span>
EventRegister<span class="token punctuation">.</span><span class="token function">addEventsListener</span><span class="token punctuation">(</span>  
    my_button<span class="token punctuation">,</span> <span class="token comment">// Un bonito botón subclase de InteractiveObject  </span>
    mouseEventsHandler<span class="token punctuation">,</span> <span class="token comment">// La función que gestiona los eventos  </span>
    EventGroup<span class="token punctuation">.</span><span class="token constant">BUTTON_EVENTS</span> <span class="token comment">// Un grupo de eventos de ratón  </span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">// … es lo mismo que  </span>
my_button<span class="token punctuation">.</span>buttonMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  
my_button<span class="token punctuation">.</span>mouseChildren <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  
my_button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>MouseEvent<span class="token punctuation">.</span><span class="token constant">MOUSE_OVER</span><span class="token punctuation">,</span> mouseEventsHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>  
my_button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>MouseEvent<span class="token punctuation">.</span><span class="token constant">MOUSE_OUT</span><span class="token punctuation">,</span> mouseEventsHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>  
my_button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>MouseEvent<span class="token punctuation">.</span><span class="token constant">MOUSE_DOWN</span><span class="token punctuation">,</span> mouseEventsHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>  
my_button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>MouseEvent<span class="token punctuation">.</span><span class="token constant">MOUSE_UP</span><span class="token punctuation">,</span> mouseEventsHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">mouseEventsHandler</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">e</span> <span class="token operator">:</span>MouseEvent</span><span class="token punctuation">)</span> <span class="token operator">:</span><span class="token keyword">void</span>  
<span class="token punctuation">{</span>  
    <span class="token function">trace</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  </code></pre>
<p><strong>Alineación de elementos según las dimensiones del escenario</strong></p>
<pre class="language-js" tabindex="0"><code class="language-js"><span class="token keyword">import</span> jp<span class="token punctuation">.</span>raohmaru<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span>display<span class="token punctuation">.</span>StageAlignSprite<span class="token punctuation">;</span>  
<span class="token keyword">import</span> flash<span class="token punctuation">.</span>display<span class="token punctuation">.</span>StageAlign<span class="token punctuation">;</span>

<span class="token comment">// La clase es un poco tonta, y se le ha de decir las dimensiones  </span>
<span class="token comment">// exactas del escenario (aunque sólo una vez)  </span>
StageAlignSprite<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>stage<span class="token punctuation">.</span>stageWidth<span class="token punctuation">,</span> stage<span class="token punctuation">.</span>stageHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Alinea el botón con respecto a la esquina inferior derecha del  </span>
<span class="token comment">// escenario. Cada vez que la aplicación cambie de tamaño, la posición  </span>
<span class="token comment">// del elemento cambiará según las coordenadas de esa esquina.  </span>
<span class="token keyword">new</span> <span class="token class-name">StageAlignSprite</span><span class="token punctuation">(</span>my_button<span class="token punctuation">,</span> StageAlign<span class="token punctuation">.</span><span class="token constant">BOTTOM_RIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Lo mismo pero alineado al borde izquierdo del escenario  </span>
<span class="token keyword">new</span> <span class="token class-name">StageAlignSprite</span><span class="token punctuation">(</span>  
    my_other_button<span class="token punctuation">,</span>  
    StageAlign<span class="token punctuation">.</span><span class="token constant">LEFT</span><span class="token punctuation">,</span>  
    <span class="token comment">// pixelSnap. Ajusta la posición del objeto de visualización a  </span>
    <span class="token comment">// valores enteros, evitando que se produzca aliasing y los textos  </span>
    <span class="token comment">// se vean borrosos.  </span>
    <span class="token boolean">true</span><span class="token punctuation">,</span>  
    <span class="token comment">// waitForBrowserInit. Evita un bug al incrustar un SWF con SWFObject  </span>
    <span class="token comment">// que reporta incorrectamente el ancho y alto del escenario  </span>
    <span class="token boolean">true</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>  </code></pre>
<p><strong>Paprika</strong>, (otra) librería de movimiento y animación. Paprika surgió de un experimento: un intento de programar una clase sencilla, ligera y rápida como las librerías ya consagradas (<a href="http://www.greensock.com/tweenlite/">TweenLite</a>, <a href="http://code.google.com/p/tweener/">Tweener</a> o <a href="http://code.google.com/p/tweensy/">Tweensy</a>), pero sin añadir muchas de sus funcionalidades y bytes extras que no se suelen utilizar. Paprika no tiene efectos, ni líneas de tiempo ni soporta plugins, sencillamente anima sin afectar demasiado al rendimiento.</p>
<p>(Y para que se vea que no hablo en balde, una prueba de rendimiento comparándola con otros motores: <a href="http://raohmaru.com/lab/actionscript/raohmaru-toolkit/paprika_performance_test.html">http://raohmaru.com/lab/actionscript/raohmaru-toolkit/paprika_performance_test.html</a>.<br>
Estos son los resultados en un Intel Core 2 Duo a 1.6 Ghz:)</p>
<table>
<thead>
<tr>
<th>Motor</th>
<th>FPS (Mín. / Máx. / Media)</th>
<th>MEM (Mín. / Máx.) (MB)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Paprika</strong></td>
<td>12.1 / 13.0 (12.5)</td>
<td>9.3 / 15.9</td>
</tr>
<tr>
<td><strong>Caurina Tweener</strong></td>
<td>6.1 / 8.0 (7.0)</td>
<td>9.6 / 14.9</td>
</tr>
<tr>
<td><strong>TweenLite</strong></td>
<td>11.7 / 12.9 (12.4)</td>
<td>10.6 / 27.4</td>
</tr>
<tr>
<td><strong>TweensyZero</strong></td>
<td>8.8 / 10.4 (9.6)</td>
<td>9.1 / 15.5</td>
</tr>
<tr>
<td><strong>Eaze</strong></td>
<td>12.1 / 13.7 (13.1)</td>
<td>9.0 / 15.1</td>
</tr>
</tbody>
</table>
<p>La clase comprimida ocupa 3.3KB.</p>
<pre class="language-js" tabindex="0"><code class="language-js"><span class="token keyword">import</span> jp<span class="token punctuation">.</span>raohmaru<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span>motion<span class="token punctuation">.</span>Paprika<span class="token punctuation">;</span>  
<span class="token keyword">import</span> jp<span class="token punctuation">.</span>raohmaru<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span>motion<span class="token punctuation">.</span>PaprikaSpice<span class="token punctuation">;</span>  
<span class="token keyword">import</span> jp<span class="token punctuation">.</span>raohmaru<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span>motion<span class="token punctuation">.</span>easing<span class="token punctuation">.</span>\<span class="token operator">*</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> flash<span class="token punctuation">.</span>filters<span class="token punctuation">.</span>BlurFilter<span class="token punctuation">;</span>

<span class="token comment">// Mueve y rota un bonito botón durante 0,5 segundos, siguiendo la  </span>
<span class="token comment">// interpolación de movimiento cuadrático del sr. Robert Penner,  </span>
<span class="token comment">// empezando con un retraso de 1 segundo y al finalizar invoca la  </span>
<span class="token comment">// función "onComplete" pasando un parámetro.  </span>
Paprika<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>my_button<span class="token punctuation">,</span> <span class="token number">.5</span><span class="token punctuation">,</span>  
    <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token literal-property property">rotation</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  
    Quad<span class="token punctuation">.</span>easeInOut<span class="token punctuation">,</span>  
    <span class="token number">1</span><span class="token punctuation">,</span>  
    onComplete<span class="token punctuation">,</span> <span class="token punctuation">[</span>my_button<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">onComplete</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">some_obj</span> <span class="token operator">:</span>DisplayObject</span><span class="token punctuation">)</span> <span class="token operator">:</span><span class="token keyword">void</span>  
<span class="token punctuation">{</span>  
    <span class="token keyword">var</span> <span class="token literal-property property">blur_filter</span> <span class="token operator">:</span>BlurFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BlurFilter</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Crea una nueva animación y guarda el objeto en una variable.  </span>
    <span class="token keyword">var</span> <span class="token literal-property property">spice</span> <span class="token operator">:</span>PaprikaSpice <span class="token operator">=</span> Paprika<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>some_obj<span class="token punctuation">,</span> <span class="token number">2.1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">scale</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// Este método se invoca durante la interpolación.  </span>
    spice<span class="token punctuation">.</span><span class="token function-variable function">onUpdate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span><span class="token keyword">void</span>  
    <span class="token punctuation">{</span>  
        <span class="token comment">// A cada paso añade más desenfoque.  </span>
        <span class="token comment">// PaprikaSpice.progress va del 0 (inicio) al 1 (fin).  </span>
        blur_filter<span class="token punctuation">.</span>blurX <span class="token operator">=</span> blur_filter<span class="token punctuation">.</span>blurY <span class="token operator">=</span> spice<span class="token punctuation">.</span>progress \<span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">;</span>  
        some_obj<span class="token punctuation">.</span>filters <span class="token operator">=</span> <span class="token punctuation">[</span>blur_filter<span class="token punctuation">]</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  </code></pre>

        <ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/raohmaru-blog/blog/internacionalizacion-en-php/">Internacionalización en PHP</a></li><li class="links-nextprev-next">Next →<br><a href="/raohmaru-blog/blog/gettext-y-la-cache/">gettext y la caché</a></li>
        </ul>

            </div>
		</main>

		<footer>
            <div class="section">
                <p>
                    Built with <a href="https://www.11ty.dev/">Eleventy v3.0.0</a><br>
                    This page was built on 2025-03-10T21:08:11.683Z
                </p>
            </div>
		</footer>

        <script type="module" src="/raohmaru-blog/js/main.js?v=202521021"></script>
	</body>
</html>
